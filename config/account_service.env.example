# Account service environment configuration
# Generated from scripts/generate_account_env.py
#
# This file mirrors the shared connectivity values from the root `.env` so
# that Account service instances stay in sync with the main application.
# See docs/ib_service_client_template.md and docs/ib_connection_manager.md
# for detailed guidance.

# FastAPI metadata
ACCOUNT_APP_NAME="Account Service"
ACCOUNT_APP_VERSION="0.1.0"
ACCOUNT_APP_DEBUG=false
ACCOUNT_DOCS_URL="/docs"
ACCOUNT_REDOC_URL="/docs"
ACCOUNT_OPENAPI_URL="/openapi.json"

# CORS configuration
ACCOUNT_CORS_ENABLED=false
ACCOUNT_CORS_ALLOW_ORIGINS=*
ACCOUNT_CORS_ALLOW_METHODS=*
ACCOUNT_CORS_ALLOW_HEADERS=*

# Redis publish/subscribe channels
ACCOUNT_REDIS_CHANNEL_PREFIX=""
ACCOUNT_REDIS_ACCOUNT_CHANNEL="account.snapshots"
ACCOUNT_REDIS_POSITIONS_CHANNEL="account.positions"

# Market data subscription bootstrap
ACCOUNT_MARKET_DATA_SERVICE_NAME="market-data"
ACCOUNT_MARKET_DATA_BASE_URL=""
ACCOUNT_MARKET_DATA_TIMEOUT=5.0
ACCOUNT_MARKET_DATA_OWNER_ID="account-service"
ACCOUNT_MARKET_DATA_CHANNEL_PREFIX=""
ACCOUNT_MARKET_DATA_TICKER_CHANNEL="market.ticker"
ACCOUNT_MARKET_DATA_TICKER_THROTTLE_SECONDS=0.25

# Service discovery
ACCOUNT_SERVICE_DISCOVERY_ENABLED=true
ACCOUNT_SERVICE_DISCOVERY_KEY="services:registry"

# Account data publishing
ACCOUNT_PUBLISH_ON_STARTUP=true
ACCOUNT_SUBSCRIPTION_POLL_INTERVAL=5.0
ACCOUNT_SNAPSHOT_TIMEOUT=4.0
ACCOUNT_SUBSCRIPTION_QUEUE=""

# Request correlation
ACCOUNT_REQUEST_ID_HEADER="X-Request-ID"

# Service discovery registration
ACCOUNT_SERVICE_REGISTRY_ENABLED=true
ACCOUNT_SERVICE_REGISTRY_NAME="account"
ACCOUNT_SERVICE_REGISTRY_SCHEME="http"
ACCOUNT_SERVICE_REGISTRY_HOST="127.0.0.1"
ACCOUNT_SERVICE_REGISTRY_PORT=8100
ACCOUNT_SERVICE_REGISTRY_URL=""
ACCOUNT_SERVICE_REGISTRY_KEY="services:registry"
ACCOUNT_SERVICE_REGISTRY_HEARTBEAT=30.0
ACCOUNT_SERVICE_REGISTRY_REGISTRATION_ATTEMPTS=10
ACCOUNT_SERVICE_REGISTRY_RESTART_MODE=""
ACCOUNT_SERVICE_REGISTRY_DOCKER_CONTAINER=""
ACCOUNT_SERVICE_REGISTRY_DOCKER_HOST=""

# Automatic IB client setup (1 to enable, 0 to disable)
ACCOUNT_AUTO_CONFIGURE_IB=1

# Logging configuration
LOG_DIR=logs
LOG_LEVEL=INFO
LOG_STREAM=true

# Shared directories
DATA_DIR=data

# Redis connection URL
REDIS_URL=redis://127.0.0.1:6379/0

# MariaDB connection (inherits values from the root `.env`)
MARIADB_URL=mariadb://app_user:change_me@127.0.0.1:3306/algo_trader
MARIADB_POOL_SIZE=10
MARIADB_MAX_OVERFLOW=5
MARIADB_POOL_RECYCLE=1800
MARIADB_RETRY_ATTEMPTS=3
MARIADB_RETRY_BASE_DELAY=0.2

# IB Gateway connection (see docs/ib_connection_manager.md for details)
IB_GATEWAY_HOST=127.0.0.1
IB_GATEWAY_PORT=4002
IB_CLIENT_ID=1
IB_CONNECT_TIMEOUT=15.0
IB_READ_ONLY=false
IB_ACCOUNT=""
IB_MARKET_DATA_DEPTH_ROWS=10
IB_MARKET_DATA_QUEUE_SIZE=64
IB_GATEWAY_HISTORICAL_TIMEOUT=45.0

# Degraded mode configuration - allow service to operate without IB connection
ACCOUNT_IB_CONNECTION_REQUIRED=false
ACCOUNT_IB_CONNECTION_TIMEOUT=5.0
ACCOUNT_IB_CONNECTION_RETRY_ATTEMPTS=1
ACCOUNT_IB_CONNECTION_RETRY_DELAY=1.0
ACCOUNT_ALLOW_DEGRADED_MODE=true