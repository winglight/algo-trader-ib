# Risk service environment configuration
# Generated from scripts/generate_risk_env.py
#
# Copy this file to `.env.risk` (或类似路径) 并根据部署环境调整变量。
# 服务会读取这些变量构建 FastAPI 与风险引擎参数。

# FastAPI metadata
RISK_APP_NAME="Risk Service"
RISK_APP_VERSION="0.1.0"
RISK_APP_DEBUG=false
RISK_DOCS_URL="/docs"
RISK_REDOC_URL="/docs"
RISK_OPENAPI_URL="/openapi.json"

# Request correlation
RISK_REQUEST_ID_HEADER="X-Request-ID"

# CORS configuration
RISK_CORS_ENABLED=false
RISK_CORS_ALLOW_ORIGINS=*
RISK_CORS_ALLOW_METHODS=*
RISK_CORS_ALLOW_HEADERS=*

# Redis publish/subscribe channels
RISK_ALERTS_CHANNEL="risk.alert"
RISK_METRICS_CHANNEL="risk.metric"
RISK_PUBLISH_METRICS=true
RISK_EVENT_HISTORY_LIMIT=200
RISK_PERFORMANCE_METRICS="unrealized_pnl,realized_pnl"

# Market data retry behaviour
RISK_MARKET_DATA_RETRY_INTERVAL=5.0
RISK_MARKET_DATA_BASE_URL="http://127.0.0.1:8102"

# Risk engine tuning
RISK_TRAILING_COOLDOWN=5.0
RISK_DEFAULT_REDUCE_FRACTION=1.0
RISK_POSITION_EPSILON=0.0001
RISK_VIOLATION_EVENT_LEVEL="critical"
RISK_WARNING_EVENT_LEVEL="warning"
RISK_INFO_EVENT_LEVEL="info"

# Service discovery registration
RISK_SERVICE_REGISTRY_ENABLED=true
RISK_SERVICE_REGISTRY_NAME="risk"
RISK_SERVICE_REGISTRY_SCHEME="http"
RISK_SERVICE_REGISTRY_HOST="127.0.0.1"
RISK_SERVICE_REGISTRY_PORT=8103
RISK_SERVICE_REGISTRY_URL=""
RISK_SERVICE_REGISTRY_KEY="services:registry"
RISK_SERVICE_REGISTRY_HEARTBEAT=30.0
RISK_SERVICE_REGISTRY_REGISTRATION_ATTEMPTS=10
RISK_SERVICE_REGISTRY_RESTART_MODE=""
RISK_SERVICE_REGISTRY_DOCKER_CONTAINER=""
RISK_SERVICE_REGISTRY_DOCKER_HOST=""

# Logging configuration
LOG_DIR=logs
LOG_LEVEL=INFO
LOG_STREAM=true

# Shared directories
DATA_DIR=data

# Shared Redis connection
REDIS_URL=redis://127.0.0.1:6379/0

# MariaDB connection (inherits values from the root `.env`)
MARIADB_URL=mariadb://app_user:change_me@127.0.0.1:3306/algo_trader
MARIADB_POOL_SIZE=5
MARIADB_MAX_OVERFLOW=10
MARIADB_POOL_RECYCLE=1800
MARIADB_ECHO=false